{"ast":null,"code":"// frontend/src/components/UserManagement.js\nimport React,{useEffect,useState}from'react';import axios from'axios';import'./Panel.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);const token=localStorage.getItem('token');useEffect(()=>{const fetchUsers=async()=>{try{const response=await axios.get('http://localhost:5000/api/users',{headers:{Authorization:`Bearer ${token}`}});setUsers(response.data);}catch(err){console.error('Error fetching users:',err);setError('Failed to load users.');}finally{setLoading(false);}};fetchUsers();},[token]);const handleBlockUnblock=async(id,blocked)=>{try{await axios.patch(`http://localhost:5000/api/users/${id}/block`,{blocked:!blocked},{headers:{Authorization:`Bearer ${token}`}});setUsers(users.map(user=>user.id===id?{...user,blocked:!blocked}:user));}catch(err){console.error('Error updating user status:',err);setError('Failed to update user status.');}};const handleRedFlag=async id=>{try{await axios.patch(`http://localhost:5000/api/users/${id}/redflag`,{},{headers:{Authorization:`Bearer ${token}`}});setUsers(users.map(user=>user.id===id?{...user,redFlagged:true}:user));alert('User red-flagged successfully.');}catch(err){console.error('Error red-flagging user:',err);setError('Failed to red-flag user.');}};if(!token)return/*#__PURE__*/_jsx(\"div\",{children:\"You must log in first.\"});if(loading)return/*#__PURE__*/_jsx(\"div\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"div\",{children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"panel\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"ul\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"li\",{className:\"user-card\",children:[/*#__PURE__*/_jsx(\"h2\",{children:user.name}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Email: \",user.email]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Role: \",user.role]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Status: \",user.blocked?'Blocked':'Active']}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleBlockUnblock(user.id,user.blocked),className:user.blocked?'unblock':'block',children:user.blocked?'Unblock':'Block'}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleRedFlag(user.id),className:\"red-flag\",disabled:user.redFlagged,children:user.redFlagged?'Red-Flagged':'Red Flag'})]},user.id))})]});};export default UserManagement;","map":{"version":3,"names":["React","useEffect","useState","axios","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","loading","setLoading","error","setError","token","localStorage","getItem","fetchUsers","response","get","headers","Authorization","data","err","console","handleBlockUnblock","id","blocked","patch","map","user","handleRedFlag","redFlagged","alert","children","className","name","email","role","onClick","disabled"],"sources":["C:/securetradeplatform/frontend/src/components/UserManagement.js"],"sourcesContent":["// frontend/src/components/UserManagement.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './Panel.css';\r\n\r\nconst UserManagement = () => {\r\n  const [users, setUsers] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchUsers = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/users', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setUsers(response.data);\r\n      } catch (err) {\r\n        console.error('Error fetching users:', err);\r\n        setError('Failed to load users.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchUsers();\r\n  }, [token]);\r\n\r\n  const handleBlockUnblock = async (id, blocked) => {\r\n    try {\r\n      await axios.patch(\r\n        `http://localhost:5000/api/users/${id}/block`,\r\n        { blocked: !blocked },\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setUsers(users.map(user => (user.id === id ? { ...user, blocked: !blocked } : user)));\r\n    } catch (err) {\r\n      console.error('Error updating user status:', err);\r\n      setError('Failed to update user status.');\r\n    }\r\n  };\r\n\r\n  const handleRedFlag = async (id) => {\r\n    try {\r\n      await axios.patch(\r\n        `http://localhost:5000/api/users/${id}/redflag`,\r\n        {},\r\n        { headers: { Authorization: `Bearer ${token}` } }\r\n      );\r\n      setUsers(users.map(user => (user.id === id ? { ...user, redFlagged: true } : user)));\r\n      alert('User red-flagged successfully.');\r\n    } catch (err) {\r\n      console.error('Error red-flagging user:', err);\r\n      setError('Failed to red-flag user.');\r\n    }\r\n  };\r\n\r\n  if (!token) return <div>You must log in first.</div>;\r\n  if (loading) return <div>Loading...</div>;\r\n  if (error) return <div>{error}</div>;\r\n\r\n  return (\r\n    <div className=\"panel\">\r\n      <h1>User Management</h1>\r\n      <ul>\r\n        {users.map((user) => (\r\n          <li key={user.id} className=\"user-card\">\r\n            <h2>{user.name}</h2>\r\n            <p>Email: {user.email}</p>\r\n            <p>Role: {user.role}</p>\r\n            <p>Status: {user.blocked ? 'Blocked' : 'Active'}</p>\r\n            <button onClick={() => handleBlockUnblock(user.id, user.blocked)} className={user.blocked ? 'unblock' : 'block'}>\r\n              {user.blocked ? 'Unblock' : 'Block'}\r\n            </button>\r\n            <button onClick={() => handleRedFlag(user.id)} className=\"red-flag\" disabled={user.redFlagged}>\r\n              {user.redFlagged ? 'Red-Flagged' : 'Red Flag'}\r\n            </button>\r\n          </li>\r\n        ))}\r\n      </ul>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default UserManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}