{"ast":null,"code":"// frontend/src/components/Support.js\nimport React,{useState,useEffect}from'react';import axios from'axios';import'./Support.css';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Support=()=>{const[activeTab,setActiveTab]=useState('ticket');const[ticketDescription,setTicketDescription]=useState('');const[tickets,setTickets]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const token=localStorage.getItem('token');useEffect(()=>{const fetchTickets=async()=>{try{const response=await axios.get('http://localhost:5000/api/support/tickets',{headers:{Authorization:`Bearer ${token}`}});setTickets(response.data);}catch(err){console.error('Error fetching tickets:',err);setError('Failed to load tickets.');}finally{setLoading(false);}};fetchTickets();},[token]);const handleOpenTicket=async e=>{e.preventDefault();setError('');if(!ticketDescription){setError('Ticket description is required.');return;}try{const response=await axios.post('http://localhost:5000/api/support/ticket',{description:ticketDescription},{headers:{Authorization:`Bearer ${token}`}});setTickets([...tickets,response.data.ticket]);setTicketDescription('');alert('Ticket opened successfully: '+response.data.message);}catch(err){console.error('Error opening ticket:',err);setError('Failed to open ticket. Please try again later.');}};return/*#__PURE__*/_jsxs(\"div\",{className:\"support-container\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Support\"}),error&&/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('ticket'),className:activeTab==='ticket'?'active':'',children:\"Open a Ticket\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setActiveTab('tickets'),className:activeTab==='tickets'?'active':'',children:\"My Tickets\"})]}),activeTab==='ticket'&&/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleOpenTicket,children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Ticket Description:\",/*#__PURE__*/_jsx(\"textarea\",{value:ticketDescription,onChange:e=>setTicketDescription(e.target.value),placeholder:\"Describe your issue...\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit Ticket\"})]}),activeTab==='tickets'&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{children:\"My Tickets\"}),loading?/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"}):/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Created At\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:tickets.map(ticket=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:ticket.id}),/*#__PURE__*/_jsx(\"td\",{children:ticket.description}),/*#__PURE__*/_jsx(\"td\",{children:ticket.status}),/*#__PURE__*/_jsx(\"td\",{children:new Date(ticket.createdAt).toLocaleString()})]},ticket.id))})]})]})]});};export default Support;","map":{"version":3,"names":["React","useState","useEffect","axios","jsx","_jsx","jsxs","_jsxs","Support","activeTab","setActiveTab","ticketDescription","setTicketDescription","tickets","setTickets","loading","setLoading","error","setError","token","localStorage","getItem","fetchTickets","response","get","headers","Authorization","data","err","console","handleOpenTicket","e","preventDefault","post","description","ticket","alert","message","className","children","onClick","onSubmit","value","onChange","target","placeholder","required","type","map","id","status","Date","createdAt","toLocaleString"],"sources":["C:/securetradeplatform/frontend/src/components/Support.js"],"sourcesContent":["// frontend/src/components/Support.js\r\nimport React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport './Support.css';\r\n\r\nconst Support = () => {\r\n  const [activeTab, setActiveTab] = useState('ticket');\r\n  const [ticketDescription, setTicketDescription] = useState('');\r\n  const [tickets, setTickets] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchTickets = async () => {\r\n      try {\r\n        const response = await axios.get('http://localhost:5000/api/support/tickets', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setTickets(response.data);\r\n      } catch (err) {\r\n        console.error('Error fetching tickets:', err);\r\n        setError('Failed to load tickets.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n    fetchTickets();\r\n  }, [token]);\r\n\r\n  const handleOpenTicket = async (e) => {\r\n    e.preventDefault();\r\n    setError('');\r\n\r\n    if (!ticketDescription) {\r\n      setError('Ticket description is required.');\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await axios.post('http://localhost:5000/api/support/ticket', {\r\n        description: ticketDescription,\r\n      }, {\r\n        headers: { Authorization: `Bearer ${token}` },\r\n      });\r\n      setTickets([...tickets, response.data.ticket]);\r\n      setTicketDescription('');\r\n      alert('Ticket opened successfully: ' + response.data.message);\r\n    } catch (err) {\r\n      console.error('Error opening ticket:', err);\r\n      setError('Failed to open ticket. Please try again later.');\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"support-container\">\r\n      <h1>Support</h1>\r\n      {error && <p className=\"error\">{error}</p>}\r\n      <div className=\"tabs\">\r\n        <button onClick={() => setActiveTab('ticket')} className={activeTab === 'ticket' ? 'active' : ''}>\r\n          Open a Ticket\r\n        </button>\r\n        <button onClick={() => setActiveTab('tickets')} className={activeTab === 'tickets' ? 'active' : ''}>\r\n          My Tickets\r\n        </button>\r\n      </div>\r\n\r\n      {activeTab === 'ticket' && (\r\n        <form onSubmit={handleOpenTicket}>\r\n          <label>\r\n            Ticket Description:\r\n            <textarea\r\n              value={ticketDescription}\r\n              onChange={(e) => setTicketDescription(e.target.value)}\r\n              placeholder=\"Describe your issue...\"\r\n              required\r\n            />\r\n          </label>\r\n          <button type=\"submit\">Submit Ticket</button>\r\n        </form>\r\n      )}\r\n\r\n      {activeTab === 'tickets' && (\r\n        <div>\r\n          <h2>My Tickets</h2>\r\n          {loading ? (\r\n            <p>Loading...</p>\r\n          ) : (\r\n            <table>\r\n              <thead>\r\n                <tr>\r\n                  <th>ID</th>\r\n                  <th>Description</th>\r\n                  <th>Status</th>\r\n                  <th>Created At</th>\r\n                </tr>\r\n              </thead>\r\n              <tbody>\r\n                {tickets.map((ticket) => (\r\n                  <tr key={ticket.id}>\r\n                    <td>{ticket.id}</td>\r\n                    <td>{ticket.description}</td>\r\n                    <td>{ticket.status}</td>\r\n                    <td>{new Date(ticket.createdAt).toLocaleString()}</td>\r\n                  </tr>\r\n                ))}\r\n              </tbody>\r\n            </table>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Support;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}