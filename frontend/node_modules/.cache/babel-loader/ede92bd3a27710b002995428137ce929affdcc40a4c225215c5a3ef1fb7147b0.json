{"ast":null,"code":"// frontend/src/components/CustomerDashboard.js\nimport React,{useEffect,useState}from'react';import axios from'axios';import'./CustomerDashboard.css';import WhatsNew from'./WhatsNew';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const CustomerDashboard=()=>{const[userActivity,setUserActivity]=useState([]);const[transactions,setTransactions]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const token=localStorage.getItem('token');useEffect(()=>{const fetchData=async()=>{try{const activityResponse=await axios.get('http://localhost:5000/api/user/activity',{headers:{Authorization:`Bearer ${token}`}});setUserActivity(Array.isArray(activityResponse.data)?activityResponse.data:[]);const transactionsResponse=await axios.get('http://localhost:5000/api/transactions',{headers:{Authorization:`Bearer ${token}`}});setTransactions(Array.isArray(transactionsResponse.data)?transactionsResponse.data:[]);}catch(err){console.error('Error fetching data:',err);setError('Failed to load data. Please check your network connection and try again.');}finally{setLoading(false);}};if(token){fetchData();}else{setError('You must log in first.');setLoading(false);}},[token]);if(loading)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"});if(error)return/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error});return/*#__PURE__*/_jsxs(\"div\",{className:\"customer-dashboard\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Customer Dashboard\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"tile\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Activity\"}),/*#__PURE__*/_jsx(\"ul\",{children:userActivity.map(activity=>/*#__PURE__*/_jsx(\"li\",{children:activity.action},activity.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tile\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"What's New\"}),/*#__PURE__*/_jsx(WhatsNew,{})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"tile\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Transactions\"}),/*#__PURE__*/_jsx(\"ul\",{children:transactions.map(transaction=>/*#__PURE__*/_jsxs(\"li\",{children:[transaction.description,\": \",transaction.amount,\" - \",transaction.status]},transaction.id))})]})]})]});};export default CustomerDashboard;","map":{"version":3,"names":["React","useEffect","useState","axios","WhatsNew","jsx","_jsx","jsxs","_jsxs","CustomerDashboard","userActivity","setUserActivity","transactions","setTransactions","loading","setLoading","error","setError","token","localStorage","getItem","fetchData","activityResponse","get","headers","Authorization","Array","isArray","data","transactionsResponse","err","console","children","className","map","activity","action","id","transaction","description","amount","status"],"sources":["C:/securetradeplatform/frontend/src/components/CustomerDashboard.js"],"sourcesContent":["// frontend/src/components/CustomerDashboard.js\r\nimport React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport './CustomerDashboard.css';\r\nimport WhatsNew from './WhatsNew';\r\n\r\nconst CustomerDashboard = () => {\r\n  const [userActivity, setUserActivity] = useState([]);\r\n  const [transactions, setTransactions] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const token = localStorage.getItem('token');\r\n\r\n  useEffect(() => {\r\n    const fetchData = async () => {\r\n      try {\r\n        const activityResponse = await axios.get('http://localhost:5000/api/user/activity', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setUserActivity(Array.isArray(activityResponse.data) ? activityResponse.data : []);\r\n\r\n        const transactionsResponse = await axios.get('http://localhost:5000/api/transactions', {\r\n          headers: { Authorization: `Bearer ${token}` },\r\n        });\r\n        setTransactions(Array.isArray(transactionsResponse.data) ? transactionsResponse.data : []);\r\n      } catch (err) {\r\n        console.error('Error fetching data:', err);\r\n        setError('Failed to load data. Please check your network connection and try again.');\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    if (token) {\r\n      fetchData();\r\n    } else {\r\n      setError('You must log in first.');\r\n      setLoading(false);\r\n    }\r\n  }, [token]);\r\n\r\n  if (loading) return <p>Loading...</p>;\r\n  if (error) return <p className=\"error\">{error}</p>;\r\n\r\n  return (\r\n    <div className=\"customer-dashboard\">\r\n      <h1>Customer Dashboard</h1>\r\n      <div className=\"dashboard-content\">\r\n        <div className=\"tile\">\r\n          <h2>Your Activity</h2>\r\n          <ul>\r\n            {userActivity.map((activity) => (\r\n              <li key={activity.id}>{activity.action}</li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n        <div className=\"tile\">\r\n          <h2>What's New</h2>\r\n          <WhatsNew />\r\n        </div>\r\n        <div className=\"tile\">\r\n          <h2>Your Transactions</h2>\r\n          <ul>\r\n            {transactions.map((transaction) => (\r\n              <li key={transaction.id}>\r\n                {transaction.description}: {transaction.amount} - {transaction.status}\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CustomerDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}